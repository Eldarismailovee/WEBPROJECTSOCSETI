@model Store2.Domain.Product

@{
    ViewBag.Title = "Details";
}
<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" />
<div class="container mt-4">
    <div class="card">
        <div class="row no-gutters">
            <div class="col-md-4">
                <img src="@Url.Content(Model.ImageUrl)" class="card-img" alt="@Model.Name" style="width: 100%; height: auto; transition: transform .2s;" />
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h5 class="card-title">@Model.Name</h5>
                    <p class="card-text"><small class="text-muted">Цена: @Model.Price MDL</small></p>
                    <p class="card-text">Количество: @Model.Quantity</p>
                    <p class="card-text">Категория: @Model.Category</p>
                    <p class="card-text">Бренд: @Model.Brand</p>
                    <p class="card-text">Наличие: @(Model.IsAvailable ? "Да" : "Нет")</p>
                    <p class="card-text">Количество:</p>
                    <input type="number" id="quantity" value="1" min="1" class="form-control mb-3" style="width: auto;">
                    <a href="#" class="btn btn-primary add-to-cart" data-id="@Model.Id">Добавить в корзину</a>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script>
       $(document).ready(function () {
        $('.add-to-cart').click(function (e) {
            e.preventDefault();
            var productId = $(this).data('id');
            var quantity = $('#quantity').val(); // Получаем количество из элемента ввода
            $.ajax({
                url: '@Url.Action("AddToCart", "ShoppingCarts")',
                type: 'POST',
                data: { id: productId, quantity: quantity }, // Отправляем id и количество
                success: function (response) {
                    toastr.success('Товар успешно добавлен в корзину.');
                },
                error: function () {
                    toastr.error('Ошибка при добавлении товара в корзину.');
                }
            });
        });
    });
    </script>
    <script>
        $(document).ready(function () {
            $('.card-img').hover(
                function () {
                    $(this).css({ 'transform': 'scale(1.1)' });
                },
                function () {
                    $(this).css({ 'transform': 'scale(1)' });
                }
            );
        });
    </script>
}

<style>
    .card-img:hover {
        transform: scale(1.1);
    }
</style>
